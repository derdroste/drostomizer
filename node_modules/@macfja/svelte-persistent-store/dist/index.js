!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports):"function"==typeof define&&define.amd?define(["exports"],t):t((e="undefined"!=typeof globalThis?globalThis:e||self).PersistentStore={})}(this,(function(e){"use strict";var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},t(e,r)},r=function(){return r=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var o in t=arguments[r])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},r.apply(this,arguments)};function n(e,t,r){if(r||2===arguments.length)for(var n,o=0,i=t.length;o<i;o++)!n&&o in t||(n||(n=Array.prototype.slice.call(t,0,o)),n[o]=t[o]);return e.concat(n||Array.prototype.slice.call(t))}var o=function(e){function r(){return null!==e&&e.apply(this,arguments)||this}return function(e,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}(r,e),r}(Error),i={},a=new Set,s={};function c(e,t){if("string"==typeof e||"number"==typeof e&&!isNaN(e)&&Math.abs(e)!==1/0||null==e||"boolean"==typeof e)return e;var n=t.indexOf(e);if(-1!==n)return"#$@__instance__"+n;t.push(e);var o=t.length-1;if(e.constructor===Array){var i=e.map((function(e){return c(e,t)}));return i.unshift("#$@__reference__"+o),i}if(e.constructor===Object){var u=Object.fromEntries(Object.entries(e).map((function(e){return[e[0],c(e[1],t)]})));return u["#$@__reference__"]=o,u}a.add(e.constructor);var l={};l=Object.defineProperty(l,"#$@__constructor__",{value:e.constructor.name,enumerable:!0}),l=Object.defineProperty(l,"#$@__reference__",{value:o,enumerable:!0});var f=function(e,t){if(Object.keys(s).includes(e.constructor.name))return s[e.constructor.name].toPlain(e,(function(e){return c(e,t)}))}(e,t);return void 0!==f?r(r({},f),l):(Object.getOwnPropertyNames(e).forEach((function(r){Object.defineProperty(l,r,{value:c(e[r],t),enumerable:!0})})),l)}function u(e,t,r){var n;if("string"==typeof e&&0===e.indexOf("#$@__instance__"))return r[l=parseInt(e.slice("#$@__instance__".length))];if("string"==typeof e||"number"==typeof e||null==e||"boolean"==typeof e)return e;if(e.constructor===Array){if(0===e.length)return[];var i=e.shift();if("string"!=typeof i||"#$@__reference__"!==i.substring(0,"#$@__reference__".length)){if(0===Object.keys(r).length)return e.unshift(i),e;throw new o}var a=[];r[l=i.slice("#$@__reference__".length)]=a;for(var c=0;c<e.length;c++)a[c]=u(e[c],t,r);return a}if(e.constructor===Object){var l;if(null===(l=null!==(n=e["#$@__reference__"])&&void 0!==n?n:null)){if(0===Object.keys(r).length)return e;throw new o}if(delete e["#$@__reference__"],!Object.keys(e).includes("#$@__constructor__")){for(var f in a={},r[l]=a,e)a[f]=u(e[f],t,r);return a}var d=e["#$@__constructor__"];delete e["#$@__constructor__"];var p=function(e,t,r,n){if(Object.keys(s).includes(t))return s[t].fromPlain(e,(function(e){return u(e,r,n)}))}(e,d,t,r);if(void 0!==p)return p;if(!Object.keys(t).includes(d))throw new Error("The class "+d+" is not allowed");var h={};for(var f in r[l]=h,e)h[f]=u(e[f],t,r);return Object.setPrototypeOf(h,t[d].prototype),h}}function l(e){i[e.name]=e}!function(e,t){e("Date",(e=>({time:e.getTime()})),(function(e){let t=new Date;return t.setTime(e.time),t})),e("BigInt",(e=>({number:e.toString()})),(e=>BigInt(e.number))),e("String",(e=>({text:e.toString()})),(e=>new String(e.text))),e("RegExp",(e=>({source:e.source,flags:e.flags})),(e=>new RegExp(e.source,e.flags))),e("Number",(function(e){let t={nan:!1,infinity:!1,positive:!0,number:null};return Math.abs(e)===1/0?(t.infinity=!0,t.positive=Math.abs(e)===e,t):isNaN(e)?(t.nan=!0,t):(t.number=e.valueOf(),t)}),(function(e){return e.nan?NaN:e.infinity?1/0*(e.positive?1:-1):new Number(e.number)})),e("Map",((e,t)=>({data:Array.from(e.entries()).map((e=>t(e)))})),(function(e,t){const r=new Map;return e.data.map((e=>t(e))).forEach((([e,t])=>r.set(e,t))),r})),e("Set",((e,t)=>({data:Array.from(e.values()).map((e=>t(e)))})),(function(e,t){const r=new Set;return e.data.map((e=>t(e))).forEach((e=>r.add(e))),r})),e("ArrayBuffer",((e,t)=>({data:t(new Uint8Array(e))})),((e,t)=>t(e.data).buffer)),e("DataView",((e,t)=>({buffer:t(e.buffer),offset:e.byteOffset,length:e.byteLength})),((e,t)=>new DataView(t(e.buffer),e.offset,e.length))),[Error,EvalError,RangeError,AggregateError,ReferenceError,SyntaxError,TypeError,URIError,Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array,BigInt64Array,BigUint64Array].forEach((e=>t(e)))}((function(e,t,r){s[e]={toPlain:t,fromPlain:r}}),l);var f={};function d(e){return new Promise(((t,r)=>{e.oncomplete=e.onsuccess=()=>t(e.result),e.onabort=e.onerror=()=>r(e.error)}))}function p(e,t){const r=function(){if(navigator.userAgentData||!/Safari\//.test(navigator.userAgent)||/Chrom(e|ium)\//.test(navigator.userAgent)||!indexedDB.databases)return Promise.resolve();let e;return new Promise((t=>{const r=()=>indexedDB.databases().finally(t);e=setInterval(r,100),r()})).finally((()=>clearInterval(e)))}().then((()=>{const r=indexedDB.open(e);return r.onupgradeneeded=()=>r.result.createObjectStore(t),d(r)}));return(e,n)=>r.then((r=>n(r.transaction(t,e).objectStore(t))))}let h;function g(){return h||(h=p("keyval-store","keyval")),h}function y(e){let t,r=e[0],n=1;for(;n<e.length;){const o=e[n],i=e[n+1];if(n+=2,("optionalAccess"===o||"optionalCall"===o)&&null==r)return;"access"===o||"optionalAccess"===o?(t=r,r=i(r)):"call"!==o&&"optionalCall"!==o||(r=i(((...e)=>r.call(t,...e))),t=void 0)}return r}!function(e){e.defaults={},e.set=function(t,r,n){var o=n||{},i=e.defaults,a=o.expires||i.expires,s=o.domain||i.domain,c=void 0!==o.path?o.path:void 0!==i.path?i.path:"/",u=void 0!==o.secure?o.secure:i.secure,l=void 0!==o.httponly?o.httponly:i.httponly,f=void 0!==o.samesite?o.samesite:i.samesite,d=a?new Date("number"==typeof a?(new Date).getTime()+864e5*a:a):0;document.cookie=t.replace(/[^+#$&^`|]/g,encodeURIComponent).replace("(","%28").replace(")","%29")+"="+r.replace(/[^+#$&/:<-\[\]-}]/g,encodeURIComponent)+(d&&d.getTime()>=0?";expires="+d.toUTCString():"")+(s?";domain="+s:"")+(c?";path="+c:"")+(u?";secure":"")+(l?";httponly":"")+(f?";samesite="+f:"")},e.get=function(e){for(var t=document.cookie.split(";");t.length;){var r=t.pop(),n=r.indexOf("=");if(n=n<0?r.length:n,decodeURIComponent(r.slice(0,n).replace(/^\s+/,""))===e)return decodeURIComponent(r.slice(n+1))}return null},e.erase=function(t,r){e.set(t,"",{expires:-1,domain:r&&r.domain,path:r&&r.path,secure:0,httponly:0})},e.all=function(){for(var e={},t=document.cookie.split(";");t.length;){var r=t.pop(),n=r.indexOf("=");n=n<0?r.length:n,e[decodeURIComponent(r.slice(0,n).replace(/^\s+/,""))]=decodeURIComponent(r.slice(n+1))}return e}}(f);let m=!1;const b=[],v=e=>{(e=>{const t="undefined"!=typeof process&&"production"===y([process,"access",e=>e.env,"optionalAccess",e=>e.NODE_ENV]);m||-1!==b.indexOf(e)||t||("undefined"==typeof window&&(e+="\nAre you running on a server? Most of storages are not available while running on a server."),console.warn(e),b.push(e))})(`Unable to find the ${e}. No data will be persisted.`)};let _=function(e){return void 0===e?"undefined":JSON.stringify(c(e,[]))},w=function(e,t){if(void 0===t&&(t=void 0),"string"!=typeof e)return e;if(void 0===t&&(t={}),"undefined"!==e){t=Object.fromEntries(n(n([],Object.entries(t),!0),Object.entries(i),!0));try{return u(JSON.parse(e),t,{})}catch(t){return e}}},A=l;function S(e,t,r){const n=t.getValue(r);return null!==n&&e.set(n),t.addListener&&t.addListener(r,(t=>{e.set(t)})),e.subscribe((e=>{t.setValue(r,e)})),{...e,delete(){t.deleteValue(r)}}}function O(){}function L(e=O,t=O){const r=[];return{callListeners(e,t){void 0!==t&&r.filter((({key:t})=>t===e)).forEach((({listener:e})=>e(t)))},addListener(t,n){r.push({key:t,listener:n}),1===r.length&&e()},removeListener(e,n){const o=r.indexOf({key:e,listener:n});-1!==o&&r.splice(o,1),0===r.length&&t()}}}const E=j(),x=N(),C=V();function I(e,t=!1){const r=t=>{const r=t.key;t.storageArea===e&&o(r,w(t.newValue))},{removeListener:n,callListeners:o,addListener:i}=L((()=>{t&&"undefined"!=typeof window&&y([window,"optionalAccess",e=>e.addEventListener])&&window.addEventListener("storage",r)}),(()=>{t&&"undefined"!=typeof window&&y([window,"optionalAccess",e=>e.removeEventListener])&&window.removeEventListener("storage",r)}));return{addListener:i,removeListener:n,getValue(t){const r=e.getItem(t);return w(r)},deleteValue(t){e.removeItem(t)},setValue(t,r){e.setItem(t,_(r))}}}function N(e=!1){return"undefined"!=typeof window&&y([window,"optionalAccess",e=>e.localStorage])?I(window.localStorage,e):(v("window.localStorage"),B())}function V(e=!1){return"undefined"!=typeof window&&y([window,"optionalAccess",e=>e.sessionStorage])?I(window.sessionStorage,e):(v("window.sessionStorage"),B())}function j(){return"undefined"==typeof document||"string"!=typeof y([document,"optionalAccess",e=>e.cookie])?(v("document.cookies"),B()):{getValue(e){const t=f.get(e);return w(t)},deleteValue(e){f.erase(e,{samesite:"Strict"})},setValue(e,t){f.set(e,_(t),{samesite:"Strict"})}}}var k;function B(){return{getValue:()=>null,deleteValue(){},setValue(){}}}function P(){return{addListener(){},removeListener(){},getValue:()=>null,deleteValue(){},setValue(){}}}!function(e){e[e.LOCAL=0]="LOCAL";e[e.SESSION=1]="SESSION";e[e.SYNC=2]="SYNC"}(k||(k={}));var R,M=function(e){return Math.round(e/1099511627776)||32},U=function(e){var t,r=e.length;return 0===r?0:(t=e[r-1],32*(r-1)+M(t))},T=function(e){var t,r="",n=e.length;for(t=0;t<n;t++)r+=(0xf00000000000+(0|e[t])).toString(16).substr(4);return r.substr(0,U(e)/4)},D=function(e,t,r){return 32===e?t:(r?0|t:t<<32-e)+1099511627776*e},$=function(e,t){if(32*e.length<t)return e;var r=(e=e.slice(0,Math.ceil(t/32))).length;return t&=31,r>0&&t&&(e[r-1]=D(t,e[r-1]&2147483648>>t-1,1)),e},Y=function(e){var t,r,n,o=[];for(n=(e=e.replace(/\s|0x/g,"")).length,r=(e+="00000000").length,t=0;t<r;t+=8)o.push(0^parseInt(e.substr(t,8),16));return $(o,4*n)},z={cipher:{},hash:{},keyexchange:{},mode:{},misc:{},codec:{},exception:{corrupt:function(e){this.toString=function(){return"CORRUPT: "+this.message},this.message=e},invalid:function(e){this.toString=function(){return"INVALID: "+this.message},this.message=e},bug:function(e){this.toString=function(){return"BUG: "+this.message},this.message=e},notReady:function(e){this.toString=function(){return"NOT READY: "+this.message},this.message=e}}};z.cipher.aes=function(e){this._tables[0][0][0]||this._precompute();var t,r,n,o,i,a=this._tables[0][4],s=this._tables[1],c=e.length,u=1;if(4!==c&&6!==c&&8!==c)throw new z.exception.invalid("invalid aes key size");for(this._key=[o=e.slice(0),i=[]],t=c;t<4*c+28;t++)n=o[t-1],(t%c==0||8===c&&t%c==4)&&(n=a[n>>>24]<<24^a[n>>16&255]<<16^a[n>>8&255]<<8^a[255&n],t%c==0&&(n=n<<8^n>>>24^u<<24,u=u<<1^283*(u>>7))),o[t]=o[t-c]^n;for(r=0;t;r++,t--)n=o[3&r?t:t-4],i[r]=t<=4||r<4?n:s[0][a[n>>>24]]^s[1][a[n>>16&255]]^s[2][a[n>>8&255]]^s[3][a[255&n]]},z.cipher.aes.prototype={encrypt:function(e){return this._crypt(e,0)},decrypt:function(e){return this._crypt(e,1)},_tables:[[[],[],[],[],[]],[[],[],[],[],[]]],_precompute:function(){var e,t,r,n,o,i,a,s,c=this._tables[0],u=this._tables[1],l=c[4],f=u[4],d=[],p=[];for(e=0;e<256;e++)p[(d[e]=e<<1^283*(e>>7))^e]=e;for(t=r=0;!l[t];t^=n||1,r=p[r]||1)for(i=(i=r^r<<1^r<<2^r<<3^r<<4)>>8^255&i^99,l[t]=i,f[i]=t,s=16843009*d[o=d[n=d[t]]]^65537*o^257*n^16843008*t,a=257*d[i]^16843008*i,e=0;e<4;e++)c[e][t]=a=a<<24^a>>>8,u[e][i]=s=s<<24^s>>>8;for(e=0;e<5;e++)c[e]=c[e].slice(0),u[e]=u[e].slice(0)},_crypt:function(e,t){if(4!==e.length)throw new z.exception.invalid("invalid aes block size");var r,n,o,i,a=this._key[t],s=e[0]^a[0],c=e[t?3:1]^a[1],u=e[2]^a[2],l=e[t?1:3]^a[3],f=a.length/4-2,d=4,p=[0,0,0,0],h=this._tables[t],g=h[0],y=h[1],m=h[2],b=h[3],v=h[4];for(i=0;i<f;i++)r=g[s>>>24]^y[c>>16&255]^m[u>>8&255]^b[255&l]^a[d],n=g[c>>>24]^y[u>>16&255]^m[l>>8&255]^b[255&s]^a[d+1],o=g[u>>>24]^y[l>>16&255]^m[s>>8&255]^b[255&c]^a[d+2],l=g[l>>>24]^y[s>>16&255]^m[c>>8&255]^b[255&u]^a[d+3],d+=4,s=r,c=n,u=o;for(i=0;i<4;i++)p[t?3&-i:i]=v[s>>>24]<<24^v[c>>16&255]<<16^v[u>>8&255]<<8^v[255&l]^a[d++],r=s,s=c,c=u,u=l,l=r;return p}},z.bitArray={bitSlice:function(e,t,r){return e=z.bitArray._shiftRight(e.slice(t/32),32-(31&t)).slice(1),void 0===r?e:z.bitArray.clamp(e,r-t)},extract:function(e,t,r){var n=Math.floor(-t-r&31);return(-32&(t+r-1^t)?e[t/32|0]<<32-n^e[t/32+1|0]>>>n:e[t/32|0]>>>n)&(1<<r)-1},concat:function(e,t){if(0===e.length||0===t.length)return e.concat(t);var r=e[e.length-1],n=z.bitArray.getPartial(r);return 32===n?e.concat(t):z.bitArray._shiftRight(t,n,0|r,e.slice(0,e.length-1))},bitLength:function(e){var t,r=e.length;return 0===r?0:(t=e[r-1],32*(r-1)+z.bitArray.getPartial(t))},clamp:function(e,t){if(32*e.length<t)return e;var r=(e=e.slice(0,Math.ceil(t/32))).length;return t&=31,r>0&&t&&(e[r-1]=z.bitArray.partial(t,e[r-1]&2147483648>>t-1,1)),e},partial:function(e,t,r){return 32===e?t:(r?0|t:t<<32-e)+1099511627776*e},getPartial:function(e){return Math.round(e/1099511627776)||32},equal:function(e,t){if(z.bitArray.bitLength(e)!==z.bitArray.bitLength(t))return!1;var r,n=0;for(r=0;r<e.length;r++)n|=e[r]^t[r];return 0===n},_shiftRight:function(e,t,r,n){var o,i,a;for(void 0===n&&(n=[]);t>=32;t-=32)n.push(r),r=0;if(0===t)return n.concat(e);for(o=0;o<e.length;o++)n.push(r|e[o]>>>t),r=e[o]<<32-t;return i=e.length?e[e.length-1]:0,a=z.bitArray.getPartial(i),n.push(z.bitArray.partial(t+a&31,t+a>32?r:n.pop(),1)),n},_xor4:function(e,t){return[e[0]^t[0],e[1]^t[1],e[2]^t[2],e[3]^t[3]]},byteswapM:function(e){var t,r;for(t=0;t<e.length;++t)r=e[t],e[t]=r>>>24|r>>>8&65280|(65280&r)<<8|r<<24;return e}},z.codec.utf8String={fromBits:function(e){var t,r,n="",o=z.bitArray.bitLength(e);for(t=0;t<o/8;t++)0==(3&t)&&(r=e[t/4]),n+=String.fromCharCode(r>>>8>>>8>>>8),r<<=8;return decodeURIComponent(escape(n))},toBits:function(e){e=unescape(encodeURIComponent(e));var t,r=[],n=0;for(t=0;t<e.length;t++)n=n<<8|e.charCodeAt(t),3==(3&t)&&(r.push(n),n=0);return 3&t&&r.push(z.bitArray.partial(8*(3&t),n)),r}},z.codec.base64={_chars:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",fromBits:function(e,t,r){var n,o="",i=0,a=z.codec.base64._chars,s=0,c=z.bitArray.bitLength(e);for(r&&(a=a.substr(0,62)+"-_"),n=0;6*o.length<c;)o+=a.charAt((s^e[n]>>>i)>>>26),i<6?(s=e[n]<<6-i,i+=26,n++):(s<<=6,i-=6);for(;3&o.length&&!t;)o+="=";return o},toBits:function(e,t){e=e.replace(/\s|=/g,"");var r,n,o=[],i=0,a=z.codec.base64._chars,s=0;for(t&&(a=a.substr(0,62)+"-_"),r=0;r<e.length;r++){if((n=a.indexOf(e.charAt(r)))<0)throw new z.exception.invalid("this isn't base64!");i>26?(i-=26,o.push(s^n>>>i),s=n<<32-i):s^=n<<32-(i+=6)}return 56&i&&o.push(z.bitArray.partial(56&i,s,1)),o}},z.codec.base64url={fromBits:function(e){return z.codec.base64.fromBits(e,1,1)},toBits:function(e){return z.codec.base64.toBits(e,1)}},z.mode.gcm={name:"gcm",encrypt:function(e,t,r,n,o){var i,a=t.slice(0),s=z.bitArray;return o=o||128,n=n||[],i=z.mode.gcm._ctrMode(!0,e,a,n,r,o),s.concat(i.data,i.tag)},decrypt:function(e,t,r,n,o){var i,a,s=t.slice(0),c=z.bitArray,u=c.bitLength(s);if(n=n||[],(o=o||128)<=u?(a=c.bitSlice(s,u-o),s=c.bitSlice(s,0,u-o)):(a=s,s=[]),i=z.mode.gcm._ctrMode(!1,e,s,n,r,o),!c.equal(i.tag,a))throw new z.exception.corrupt("gcm: tag doesn't match");return i.data},_galoisMultiply:function(e,t){var r,n,o,i,a,s=z.bitArray._xor4;for(o=[0,0,0,0],i=t.slice(0),r=0;r<128;r++){for(0!=(e[Math.floor(r/32)]&1<<31-r%32)&&(o=s(o,i)),a=0!=(1&i[3]),n=3;n>0;n--)i[n]=i[n]>>>1|(1&i[n-1])<<31;i[0]=i[0]>>>1,a&&(i[0]=i[0]^225<<24)}return o},_ghash:function(e,t,r){var n,o,i=r.length;for(n=t.slice(0),o=0;o<i;o+=4)n[0]^=4294967295&r[o],n[1]^=4294967295&r[o+1],n[2]^=4294967295&r[o+2],n[3]^=4294967295&r[o+3],n=z.mode.gcm._galoisMultiply(n,e);return n},_ctrMode:function(e,t,r,n,o,i){var a,s,c,u,l,f,d,p,h,g,y,m,b=z.bitArray;for(h=r.length,g=b.bitLength(r),y=b.bitLength(n),m=b.bitLength(o),a=t.encrypt([0,0,0,0]),96===m?(s=o.slice(0),s=b.concat(s,[1])):(s=z.mode.gcm._ghash(a,[0,0,0,0],o),s=z.mode.gcm._ghash(a,s,[0,0,Math.floor(m/4294967296),4294967295&m])),c=z.mode.gcm._ghash(a,[0,0,0,0],n),f=s.slice(0),d=c.slice(0),e||(d=z.mode.gcm._ghash(a,c,r)),l=0;l<h;l+=4)f[3]++,u=t.encrypt(f),r[l]^=u[0],r[l+1]^=u[1],r[l+2]^=u[2],r[l+3]^=u[3];return r=b.clamp(r,g),e&&(d=z.mode.gcm._ghash(a,c,r)),p=[Math.floor(y/4294967296),4294967295&y,Math.floor(g/4294967296),4294967295&g],d=z.mode.gcm._ghash(a,d,p),u=t.encrypt(s),d[0]^=u[0],d[1]^=u[1],d[2]^=u[2],d[3]^=u[3],{tag:b.bitSlice(d,0,i),data:r}}},function(e){e[e.EXCEPTION=0]="EXCEPTION";e[e.NO_ENCRYPTION=1]="NO_ENCRYPTION";e[e.NO_STORAGE=2]="NO_STORAGE"}(R||(R={}));class G{constructor(e){this.cipher=new z.cipher.aes(Y(e))}encrypt(e,t){t||(t="sps");const r=z.codec.utf8String.toBits(t);return T(z.mode.gcm.encrypt(this.cipher,z.codec.utf8String.toBits(e),r,[],256))+":"+T(r)}decrypt(e){return z.codec.utf8String.fromBits(z.mode.gcm.decrypt(this.cipher,Y(e.split(":")[0]),Y(e.split(":")[1])))}hash(e){return this.encrypt(e,"sps")}}function q(e,t){return{getValue(r){const n=t.hash(r),o=e.getValue(n);return null===o?null:w(t.decrypt(o))},setValue(r,n){const o=t.hash(r),i=t.encrypt(_(n));e.setValue(o,i)},deleteValue(r){const n=t.hash(r);e.deleteValue(n)}}}e.addSerializableClass=e=>{A(e)},e.createChromeStorage=function(e=k.LOCAL,t=!1){if("object"!=typeof chrome||"object"!=typeof chrome.storage)return v("ChromeStorage"),P();let r="local";switch(e){case k.LOCAL:r="local";break;case k.SYNC:r="sync";break;case k.SESSION:r="session"}function n(e,t){if(t===r)for(const[t,{newValue:r}]of Object.entries(e))i(t,r)}const{removeListener:o,callListeners:i,addListener:a}=L((()=>{t&&chrome.storage.onChanged.addListener(n)}),(()=>{t&&chrome.storage.onChanged.removeListener(n)}));return{addListener:a,removeListener:o,getValue:e=>(chrome.storage[r].get([e],(t=>i(e,t.key))),null),setValue(e,t){chrome.storage[r].set({[e]:t})},deleteValue(e){chrome.storage[r].remove(e)}}},e.createCookieStorage=j,e.createEncryptedStorage=function(e,t){return q(e,new G(t))},e.createEncryptionStorage=q,e.createIndexedDBStorage=function(){if("object"!=typeof indexedDB||"undefined"==typeof window||"object"!=typeof y([window,"optionalAccess",e=>e.indexedDB]))return v("IndexedDB"),P();const{removeListener:e,callListeners:t,addListener:r}=L(),n=p("svelte-persist","persist");return{addListener:r,removeListener:e,getValue:e=>(function(e,t=g()){return t("readonly",(t=>d(t.get(e))))}(e,n).then((r=>t(e,w(r)))),null),setValue(e,t){!function(e,t,r=g()){r("readwrite",(r=>(r.put(t,e),d(r.transaction))))}(e,_(t),n)},deleteValue(e){!function(e,t=g()){t("readwrite",(t=>(t.delete(e),d(t.transaction))))}(e,n)}}},e.createLocalStorage=N,e.createNoopStorage=B,e.createSessionStorage=V,e.disableWarnings=function(){m=!0},e.noEncryptionBehavior=function(e){},e.persist=S,e.persistBrowserLocal=function(e,t){return S(e,x,t)},e.persistBrowserSession=function(e,t){return S(e,C,t)},e.persistCookie=function(e,t){return S(e,E,t)},e.setSerialization=function(e,t,r){var n,o;_=e,w=t,o=()=>()=>{},A=null!=(n=r)?n:o()},Object.defineProperty(e,"__esModule",{value:!0})}));
